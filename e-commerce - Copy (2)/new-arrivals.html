<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Arrivals - ShopEasy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-top">
                <a href="index.html" class="logo" aria-label="ShopEasy Home">
                    <i class="fas fa-shopping-bag" aria-hidden="true"></i>
                    ShopEasy
                </a>
                <div class="search-bar">
                    <input type="text" id="search-input" placeholder="Search for products..." aria-label="Search products">
                    <button id="search-btn" aria-label="Search"><i class="fas fa-search"></i></button>
                </div>
                <div class="header-actions">
                    <a href="#" id="wishlist-btn" aria-label="Wishlist">
                        <i class="fas fa-heart"></i>
                        <span class="wishlist-count" aria-live="polite">0</span>
                    </a>
                    <a href="#" id="cart-btn" class="cart" aria-label="Shopping Cart">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" aria-live="polite">0</span>
                    </a>
                </div>
                
                <button class="mobile-search-toggle" aria-label="Toggle search">
                    <i class="fas fa-search"></i>
                </button>
                
                <button class="mobile-menu-toggle" aria-label="Toggle mobile menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        
        <nav aria-label="Main Navigation">
            <div class="container">
                <ul class="nav-links">
                    <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                    <li class="mega-menu-container">
                        <a href="#" class="mega-menu-trigger">Team Wear <i class="fa fa-angle-down"></i></a>
                        <div class="mega-menu">
                            <div class="mega-menu-content">
                                <h3>Team Wear Collections</h3>
                                <div class="mega-menu-grid">
                                    <div class="mega-menu-item" onclick="filterNewArrivals('teamwear')">
                                        <img src="assets/image/team-wear-1.jpg" alt="Team Jerseys">
                                        <h4>Team Jerseys</h4>
                                        <p>Premium quality custom jerseys</p>
                                    </div>
                                    <div class="mega-menu-item" onclick="filterNewArrivals('teamwear')">
                                        <img src="assets/image/team-wear-2.jpg" alt="Team Shorts">
                                        <h4>Team Shorts</h4>
                                        <p>Comfortable and durable shorts</p>
                                    </div>
                                    <div class="mega-menu-item" onclick="filterNewArrivals('teamwear')">
                                        <img src="assets/image/team-wear-3.jpg" alt="Team Accessories">
                                        <h4>Team Accessories</h4>
                                        <p>Caps, bands, and more</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="mega-menu-container">
                        <a href="#" class="mega-menu-trigger">Active Wear <i class="fas fa-angle-down"></i></a>
                        <div class="mega-menu">
                            <div class="mega-menu-content">
                                <h3>Active Wear Collections</h3>
                                <div class="mega-menu-grid">
                                    <div class="mega-menu-item" onclick="filterNewArrivals('activewear')">
                                        <img src="assets/image/active-wear-1.jpg" alt="Sports Tops">
                                        <h4>Sports Tops</h4>
                                        <p>Breathable athletic wear</p>
                                    </div>
                                    <div class="mega-menu-item" onclick="filterNewArrivals('activewear')">
                                        <img src="assets/image/active-wear-2.jpg" alt="Leggings">
                                        <h4>Leggings & Pants</h4>
                                        <p>Flexible and comfortable fit</p>
                                    </div>
                                    <div class="mega-menu-item" onclick="filterNewArrivals('activewear')">
                                        <img src="assets/image/active-wear-3.jpg" alt="Activewear Accessories">
                                        <h4>Accessories</h4>
                                        <p>Bags, socks, and more</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="mega-menu-container">
                        <a href="#" class="mega-menu-trigger">Casual Wear <i class="fas fa-angle-down"></i></a>
                        <div class="mega-menu">
                            <div class="mega-menu-content">
                                <h3>Casual Wear Collections</h3>
                                <div class="mega-menu-grid">
                                    <div class="mega-menu-item" onclick="filterNewArrivals('casualwear')">
                                        <img src="assets/image/casual-wear-1.jpg" alt="T-Shirts">
                                        <h4>T-Shirts</h4>
                                        <p>Classic and trendy designs</p>
                                    </div>
                                    <div class="mega-menu-item" onclick="filterNewArrivals('casualwear')">
                                        <img src="assets/image/casual-wear-2.jpg" alt="Casual Bottoms">
                                        <h4>Casual Bottoms</h4>
                                        <p>Jeans, pants, and shorts</p>
                                    </div>
                                    <div class="mega-menu-item" onclick="filterNewArrivals('casualwear')">
                                        <img src="assets/image/casual-wear-3.jpg" alt="Casual Accessories">
                                        <h4>Accessories</h4>
                                        <p>Hats, belts, and more</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="mega-menu-container">
                        <a href="#" class="mega-menu-trigger">Hunters Wear <i class="fas fa-angle-down"></i></a>
                        <div class="mega-menu">
                            <div class="mega-menu-content">
                                <h3>Hunters Wear Collections</h3>
                                <div class="mega-menu-grid">
                                    <div class="mega-menu-item" onclick="filterNewArrivals('hunterswear')">
                                        <img src="assets/image/hunters-wear-1.jpg" alt="Hunting Jackets">
                                        <h4>Hunting Jackets</h4>
                                        <p>Durable and weather-resistant</p>
                                    </div>
                                    <div class="mega-menu-item" onclick="filterNewArrivals('hunterswear')">
                                        <img src="assets/image/hunters-wear-2.jpg" alt="Hunting Pants">
                                        <h4>Hunting Pants</h4>
                                        <p>Camouflage and tactical</p>
                                    </div>
                                    <div class="mega-menu-item" onclick="filterNewArrivals('hunterswear')">
                                        <img src="assets/image/hunters-wear-3.jpg" alt="Hunting Gear">
                                        <h4>Hunting Gear</h4>
                                        <p>Boots, vests, and equipment</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li><a href="new-arrivals.html" class="active"><i class="fas fa-star"></i> New Arrivals</a></li>
                    <li><a href="collections.html"><i class="fas fa-layer-group"></i> Collections</a></li>
                </ul>
            </div>
            
            <div class="mobile-menu-overlay"></div>
            <div class="mobile-menu-container">
                <div class="mobile-menu-header">
                    <h3>Menu</h3>
                    <button class="mobile-menu-close" aria-label="Close mobile menu">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mobile-menu-content">
                    <a href="index.html"><i class="fas fa-home"></i> Home</a>
                    
                    <!-- Team Wear Mobile -->
                    <div class="mobile-mega-menu-item">
                        <button class="mobile-mega-menu-trigger">
                            <i class="fas fa-tshirt"></i> Team Wear <i class="fas fa-angle-down"></i>
                        </button>
                        <div class="mobile-mega-menu">
                            <a href="#" onclick="filterNewArrivals('teamwear')"><i class="fas fa-shield-alt"></i> Team Jerseys</a>
                            <a href="#" onclick="filterNewArrivals('teamwear')"><i class="fas fa-running"></i> Team Shorts</a>
                            <a href="#" onclick="filterNewArrivals('teamwear')"><i class="fas fa-baseball-ball"></i> Team Accessories</a>
                        </div>
                    </div>
                    
                    <!-- Active Wear Mobile -->
                    <div class="mobile-mega-menu-item">
                        <button class="mobile-mega-menu-trigger">
                            <i class="fas fa-running"></i> Active Wear <i class="fas fa-angle-down"></i>
                        </button>
                        <div class="mobile-mega-menu">
                            <a href="#" onclick="filterNewArrivals('activewear')"><i class="fas fa-tshirt"></i> Sports Tops</a>
                            <a href="#" onclick="filterNewArrivals('activewear')"><i class="fas fa-socks"></i> Leggings & Pants</a>
                            <a href="#" onclick="filterNewArrivals('activewear')"><i class="fas fa-dumbbell"></i> Accessories</a>
                        </div>
                    </div>
                    
                    <!-- Casual Wear Mobile -->
                    <div class="mobile-mega-menu-item">
                        <button class="mobile-mega-menu-trigger">
                            <i class="fas fa-user-tie"></i> Casual Wear <i class="fas fa-angle-down"></i>
                        </button>
                        <div class="mobile-mega-menu">
                            <a href="#" onclick="filterNewArrivals('casualwear')"><i class="fas fa-tshirt"></i> T-Shirts</a>
                            <a href="#" onclick="filterNewArrivals('casualwear')"><i class="fas fa-hat-cowboy"></i> Casual Bottoms</a>
                            <a href="#" onclick="filterNewArrivals('casualwear')"><i class="fas fa-vest"></i> Accessories</a>
                        </div>
                    </div>
                    
                    <!-- Hunters Wear Mobile -->
                    <div class="mobile-mega-menu-item">
                        <button class="mobile-mega-menu-trigger">
                            <i class="fas fa-hiking"></i> Hunters Wear <i class="fas fa-angle-down"></i>
                        </button>
                        <div class="mobile-mega-menu">
                            <a href="#" onclick="filterNewArrivals('hunterswear')"><i class="fas fa-hiking"></i> Hunting Jackets</a>
                            <a href="#" onclick="filterNewArrivals('hunterswear')"><i class="fas fa-tree"></i> Hunting Pants</a>
                            <a href="#" onclick="filterNewArrivals('hunterswear')"><i class="fas fa-boot"></i> Hunting Gear</a>
                        </div>
                    </div>
                    
                    <a href="new-arrivals.html" class="active"><i class="fas fa-star"></i> New Arrivals</a>
                    <a href="collections.html"><i class="fas fa-layer-group"></i> Collections</a>
                    <a href="product-details.html"><i class="fas fa-eye"></i> Products</a>
                    <a href="checkout.html"><i class="fas fa-shopping-cart"></i> Checkout</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="new-arrivals-page">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="section-title">New Arrivals</h1>
                <p class="page-subtitle">Discover our latest products and freshest styles</p>
            </div>
            
            <!-- New Arrivals Navigation -->
            <div class="new-arrivals-nav">
                <div class="time-filters">
                    <span class="time-label">Just Added:</span>
                    <button class="time-btn active" data-time="all">All New</button>
                    <button class="time-btn" data-time="today">Today</button>
                    <button class="time-btn" data-time="week">This Week</button>
                    <button class="time-btn" data-time="month">This Month</button>
                </div>
                
                <div class="arrivals-sort">
                    <label for="arrivals-sort-select">Sort by:</label>
                    <select id="arrivals-sort-select" class="sort-select">
                        <option value="newest">Newest First</option>
                        <option value="popular">Most Popular</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="rating">Highest Rated</option>
                    </select>
                </div>
            </div>
            
            <!-- Product Counter -->
            <div class="product-counter">
                <span id="product-count">3</span> new products added recently
                <span class="new-badge"><i class="fas fa-bolt"></i> Fresh Stock</span>
            </div>
            
            <!-- Products Grid -->
            <div id="products-container" class="products"></div>
            
            <!-- New Arrivals Banner -->
            <div class="new-arrivals-banner">
                <div class="banner-content">
                    <h3><i class="fas fa-rocket"></i> Be the First to Get New Items!</h3>
                    <p>Subscribe to get notified when new products arrive</p>
                    <div class="notification-form">
                        <input type="email" placeholder="Enter your email" class="notification-input">
                        <button class="notification-btn">Notify Me</button>
                    </div>
                </div>
            </div>
            
            <!-- Coming Soon Section -->
            <div class="coming-soon">
                <h3><i class="fas fa-hourglass-half"></i> Coming Soon</h3>
                <div class="coming-soon-items">
                    <div class="coming-soon-item">
                        <div class="coming-soon-image"></div>
                        <h4>Smart Fitness Tracker</h4>
                        <p>Available in 2 weeks</p>
                    </div>
                    <div class="coming-soon-item">
                        <div class="coming-soon-image"></div>
                        <h4>Wireless Earbuds Pro</h4>
                        <p>Available next week</p>
                    </div>
                    <div class="coming-soon-item">
                        <div class="coming-soon-image"></div>
                        <h4>Premium Backpack</h4>
                        <p>Available in 3 days</p>
                    </div>
                </div>
            </div>
            
            <!-- Empty State -->
            <div id="empty-state" class="empty-state hidden">
                <i class="fas fa-clock fa-3x"></i>
                <h3>No New Arrivals Yet</h3>
                <p>Check back soon for our latest products!</p>
                <button class="btn" onclick="window.location.href='collections.html'">Browse Collections</button>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>ShopEasy</h3>
                    <p>Minimalist online shopping for quality essentials. Curated collections, premium materials, timeless design.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Pinterest"><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Shop</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="product-details.html">Products</a></li>
                        <li><a href="checkout.html">Checkout</a></li>
                        <li><a href="collections.html">Collections</a></li>
                        <li><a href="new-arrivals.html">New Arrivals</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Information</h3>
                    <ul class="footer-links">
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="shipping-policy.html">Shipping Policy</a></li>
                        <li><a href="returns-exchanges.html">Returns & Exchanges</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Minimal Street</li>
                        <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
                        <li><i class="fas fa-envelope"></i> hello@shopeasy.com</li>
                    </ul>
                    <div class="payment-methods">
                        <i class="fab fa-cc-visa" title="Visa"></i>
                        <i class="fab fa-cc-mastercard" title="Mastercard"></i>
                        <i class="fab fa-cc-paypal" title="PayPal"></i>
                        <i class="fab fa-cc-apple-pay" title="Apple Pay"></i>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span id="current-year">2024</span> ShopEasy. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <div class="modal" id="cart-modal" aria-hidden="true">
        <div class="modal-content">
            <button class="close-modal" aria-label="Close modal">&times;</button>
            <h2>Shopping Cart</h2>
            <div id="cart-items"></div>
            <div class="cart-total">
                <h3>Total: $<span id="cart-total-price">0.00</span></h3>
                <a href="checkout.html" class="btn" id="checkout-btn">Checkout</a>
            </div>
        </div>
    </div>

    <div class="modal" id="wishlist-modal" aria-hidden="true">
        <div class="modal-content">
            <button class="close-modal" aria-label="Close modal">&times;</button>
            <h2>Wishlist</h2>
            <div id="wishlist-items"></div>
        </div>
    </div>

    <!-- Back to Top button -->
    <button class="back-to-top" id="back-to-top" aria-label="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script src="assets/js/common.js"></script>
    <script>
        // New Arrivals Page Specific JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            console.log('New Arrivals page loaded');
            
            // Initialize new arrivals page
            initNewArrivalsPage();
            setupTimeFilters();
            setupSortSelect();
            loadNewArrivals();
            setupNotificationForm();
            
            // Update active nav link
            updateActiveNavLink();
        });
        
        function initNewArrivalsPage() {
            // Add CSS for new arrivals page
            const style = document.createElement('style');
            style.textContent = `
                .new-arrivals-page {
                    padding: 40px 0 80px;
                    min-height: 60vh;
                }
                
                .page-header {
                    text-align: center;
                    margin-bottom: 50px;
                }
                
                .page-subtitle {
                    color: var(--gray);
                    font-size: 16px;
                    margin-top: 15px;
                    max-width: 600px;
                    margin-left: auto;
                    margin-right: auto;
                }
                
                .new-arrivals-nav {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 30px;
                    flex-wrap: wrap;
                    gap: 20px;
                    background: var(--secondary);
                    padding: 20px;
                    border-radius: 4px;
                    border: 1px solid var(--border);
                }
                
                .time-filters {
                    display: flex;
                    align-items: center;
                    gap: 15px;
                    flex-wrap: wrap;
                }
                
                .time-label {
                    font-size: 14px;
                    color: var(--dark-gray);
                    font-weight: 500;
                }
                
                .time-btn {
                    padding: 8px 16px;
                    background: transparent;
                    border: 1px solid var(--border);
                    border-radius: 4px;
                    color: var(--dark-gray);
                    cursor: pointer;
                    font-size: 13px;
                    transition: all 0.3s;
                }
                
                .time-btn:hover,
                .time-btn.active {
                    background: var(--dark);
                    color: var(--light);
                    border-color: var(--dark);
                }
                
                .arrivals-sort {
                    display: flex;
                    align-items: center;
                    gap: 15px;
                }
                
                .arrivals-sort label {
                    font-size: 14px;
                    color: var(--dark-gray);
                }
                
                .sort-select {
                    padding: 10px 15px;
                    border: 1px solid var(--border);
                    border-radius: 4px;
                    background: var(--light);
                    color: var(--dark);
                    font-size: 14px;
                    cursor: pointer;
                    min-width: 180px;
                }
                
                .product-counter {
                    display: flex;
                    align-items: center;
                    gap: 20px;
                    margin-bottom: 30px;
                    font-size: 14px;
                    color: var(--gray);
                }
                
                .product-counter span {
                    font-weight: 600;
                    color: var(--dark);
                }
                
                .new-badge {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    padding: 5px 12px;
                    border-radius: 20px;
                    font-size: 12px;
                    display: flex;
                    align-items: center;
                    gap: 5px;
                }
                
                .new-arrivals-banner {
                    background: linear-gradient(135deg, var(--dark) 0%, #333 100%);
                    color: var(--light);
                    padding: 40px;
                    border-radius: 8px;
                    margin: 50px 0;
                    text-align: center;
                }
                
                .banner-content h3 {
                    font-size: 24px;
                    margin-bottom: 15px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                }
                
                .banner-content p {
                    color: var(--gray);
                    margin-bottom: 25px;
                    font-size: 16px;
                }
                
                .notification-form {
                    display: flex;
                    max-width: 400px;
                    margin: 0 auto;
                    gap: 10px;
                }
                
                .notification-input {
                    flex: 1;
                    padding: 12px 20px;
                    border: none;
                    border-radius: 4px;
                    background: rgba(255, 255, 255, 0.1);
                    color: var(--light);
                    font-size: 14px;
                }
                
                .notification-input::placeholder {
                    color: rgba(255, 255, 255, 0.5);
                }
                
                .notification-btn {
                    background: var(--light);
                    color: var(--dark);
                    border: none;
                    padding: 12px 25px;
                    border-radius: 4px;
                    cursor: pointer;
                    font-weight: 500;
                    transition: all 0.3s;
                }
                
                .notification-btn:hover {
                    background: var(--secondary);
                }
                
                .coming-soon {
                    margin-top: 60px;
                    padding: 40px;
                    background: var(--secondary);
                    border-radius: 8px;
                    border: 1px solid var(--border);
                }
                
                .coming-soon h3 {
                    font-size: 20px;
                    margin-bottom: 30px;
                    color: var(--dark);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }
                
                .coming-soon-items {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                    gap: 30px;
                }
                
                .coming-soon-item {
                    background: var(--light);
                    padding: 25px;
                    border-radius: 6px;
                    border: 1px solid var(--border);
                    text-align: center;
                }
                
                .coming-soon-image {
                    width: 100%;
                    height: 150px;
                    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
                    border-radius: 4px;
                    margin-bottom: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: var(--gray);
                }
                
                .coming-soon-item h4 {
                    font-size: 16px;
                    margin-bottom: 8px;
                    color: var(--dark);
                }
                
                .coming-soon-item p {
                    font-size: 14px;
                    color: var(--gray);
                }
                
                .empty-state {
                    text-align: center;
                    padding: 60px 20px;
                }
                
                .empty-state i {
                    color: var(--border);
                    margin-bottom: 20px;
                }
                
                .empty-state h3 {
                    font-size: 20px;
                    margin-bottom: 10px;
                    color: var(--dark);
                }
                
                .empty-state p {
                    color: var(--gray);
                    margin-bottom: 25px;
                }
                
                .empty-state .btn {
                    padding: 12px 30px;
                }
                
                .hidden {
                    display: none;
                }
                
                /* New arrival badge enhancement */
                .product-badge.new {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    animation: pulse 2s infinite;
                }
                
                @keyframes pulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                    100% { transform: scale(1); }
                }
                
                @media (max-width: 768px) {
                    .new-arrivals-nav {
                        flex-direction: column;
                        align-items: stretch;
                    }
                    
                    .time-filters {
                        justify-content: center;
                    }
                    
                    .arrivals-sort {
                        justify-content: center;
                    }
                    
                    .notification-form {
                        flex-direction: column;
                    }
                    
                    .notification-input,
                    .notification-btn {
                        width: 100%;
                    }
                    
                    .coming-soon {
                        padding: 25px;
                    }
                }
            `;
            document.head.appendChild(style);
        }
        
        function loadNewArrivals() {
            // Filter products with badge 'new'
            const newArrivals = window.products.filter(product => product.badge === 'new');
            
            if (newArrivals.length === 0) {
                document.getElementById('empty-state').classList.remove('hidden');
                document.getElementById('product-count').textContent = 'No';
                return;
            }
            
            // Update product count
            document.getElementById('product-count').textContent = newArrivals.length;
            
            // Render new arrivals
            renderNewArrivals(newArrivals);
            
            // Sort by newest first by default
            sortNewArrivals('newest');
        }
        
        function renderNewArrivals(products) {
            const productsContainer = document.getElementById('products-container');
            productsContainer.innerHTML = '';
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.dataset.id = product.id;
                productCard.dataset.added = product.addedDate || 'recent'; // Simulated data
                
                const isInWishlist = window.wishlist ? window.wishlist.includes(product.id) : false;
                const stars = generateRatingStars(product.rating);
                const badge = product.badge ? `<div class="product-badge ${product.badge}">NEW</div>` : '';
                const oldPrice = product.oldPrice ? `<span class="old-price">$${product.oldPrice.toFixed(2)}</span>` : '';
                
                // Add new arrival indicator
                const newIndicator = '<div class="new-indicator" style="position: absolute; top: 15px; right: 15px; background: #667eea; color: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; z-index: 2;">HOT</div>';
                
                productCard.innerHTML = `
                    ${badge}
                    ${newIndicator}
                    <div class="product-actions">
                        <button class="product-action wishlist-btn" data-id="${product.id}" aria-label="Add to wishlist">
                            <i class="${isInWishlist ? 'fas' : 'far'} fa-heart"></i>
                        </button>
                        <button class="product-action view-btn" data-id="${product.id}" aria-label="View product details">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <img src="${product.image}" alt="${product.name}" class="product-img" width="500" height="400" loading="lazy">
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <div class="product-rating" aria-label="Rating: ${product.rating} out of 5 stars">
                            ${stars}
                            <span>(${product.reviews})</span>
                        </div>
                        <div class="product-price">
                            $${product.price.toFixed(2)}
                            ${oldPrice}
                        </div>
                        <button class="add-to-cart" data-id="${product.id}">
                            <i class="fas fa-shopping-cart"></i> Add to Cart
                        </button>
                    </div>
                `;
                
                productsContainer.appendChild(productCard);
            });
            
            // Attach event listeners
            attachProductEventListeners();
        }
        
        function generateRatingStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - Math.ceil(rating);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }
        
        function attachProductEventListeners() {
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const productId = parseInt(this.dataset.id);
                    console.log('Adding to cart:', productId);
                    if (window.addToCart) {
                        window.addToCart(productId);
                    }
                });
            });
            
            document.querySelectorAll('.wishlist-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const productId = parseInt(this.dataset.id);
                    console.log('Toggling wishlist:', productId);
                    if (window.toggleWishlist) {
                        const isInWishlist = window.toggleWishlist(productId);
                        const icon = this.querySelector('i');
                        if (icon) {
                            icon.className = isInWishlist ? 'fas fa-heart' : 'far fa-heart';
                        }
                        if (window.showToast) {
                            window.showToast(isInWishlist ? 'Added to wishlist!' : 'Removed from wishlist');
                        }
                    }
                });
            });
            
            document.querySelectorAll('.view-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const productId = parseInt(this.dataset.id);
                    console.log('Viewing product:', productId);
                    window.location.href = `product-details.html?id=${productId}`;
                });
            });
            
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    if (!e.target.closest('.product-actions') && !e.target.closest('.add-to-cart')) {
                        const productId = parseInt(this.dataset.id);
                        window.location.href = `product-details.html?id=${productId}`;
                    }
                });
            });
        }
        
        function setupTimeFilters() {
            const timeButtons = document.querySelectorAll('.time-btn');
            
            timeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    timeButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Get time filter value
                    const timeFilter = this.dataset.time;
                    
                    // Apply time filter
                    applyTimeFilter(timeFilter);
                });
            });
        }
        
        function applyTimeFilter(timeFilter) {
            // In a real app, this would filter by actual date
            // For demo, we'll just show all new arrivals
            loadNewArrivals();
            
            if (timeFilter === 'today') {
                if (window.showToast) {
                    window.showToast('Showing new arrivals from today');
                }
            } else if (timeFilter === 'week') {
                if (window.showToast) {
                    window.showToast('Showing new arrivals from this week');
                }
            } else if (timeFilter === 'month') {
                if (window.showToast) {
                    window.showToast('Showing new arrivals from this month');
                }
            }
        }
        
        function setupSortSelect() {
            const sortSelect = document.getElementById('arrivals-sort-select');
            
            if (sortSelect) {
                sortSelect.addEventListener('change', function() {
                    const sortValue = this.value;
                    sortNewArrivals(sortValue);
                });
            }
        }
        
        function sortNewArrivals(sortValue) {
            const productsContainer = document.getElementById('products-container');
            const products = Array.from(productsContainer.querySelectorAll('.product-card'));
            
            products.sort((a, b) => {
                const aPrice = parseFloat(a.querySelector('.product-price').textContent.replace('$', ''));
                const bPrice = parseFloat(b.querySelector('.product-price').textContent.replace('$', ''));
                
                const aName = a.querySelector('.product-title').textContent.toLowerCase();
                const bName = b.querySelector('.product-title').textContent.toLowerCase();
                
                const aRating = parseFloat(a.querySelector('.product-rating')?.getAttribute('aria-label')?.match(/\d+(\.\d+)?/)?.[0] || 0);
                const bRating = parseFloat(b.querySelector('.product-rating')?.getAttribute('aria-label')?.match(/\d+(\.\d+)?/)?.[0] || 0);
                
                const aReviews = parseInt(a.querySelector('.product-rating span')?.textContent?.match(/\d+/)?.[0] || 0);
                const bReviews = parseInt(b.querySelector('.product-rating span')?.textContent?.match(/\d+/)?.[0] || 0);
                
                switch (sortValue) {
                    case 'price-low':
                        return aPrice - bPrice;
                    case 'price-high':
                        return bPrice - aPrice;
                    case 'name':
                        return aName.localeCompare(bName);
                    case 'rating':
                        return bRating - aRating;
                    case 'popular':
                        return bReviews - aReviews;
                    case 'newest':
                    default:
                        return 0; // Already sorted by new
                }
            });
            
            // Reorder products in container
            products.forEach(product => {
                productsContainer.appendChild(product);
            });
        }
        
        function filterNewArrivals(category) {
            // In a real app, this would filter new arrivals by category
            if (window.showToast) {
                window.showToast(`Showing new arrivals in ${category}`);
            }
            
            // Close mobile menu if open
            const mobileMenuContainer = document.querySelector('.mobile-menu-container');
            const mobileMenuOverlay = document.querySelector('.mobile-menu-overlay');
            if (mobileMenuContainer && mobileMenuContainer.classList.contains('active')) {
                mobileMenuContainer.classList.remove('active');
                mobileMenuOverlay.classList.remove('active');
                document.body.style.overflow = '';
            }
            
            // Close mega menu if open
            const megaMenus = document.querySelectorAll('.mega-menu');
            megaMenus.forEach(menu => menu.classList.remove('active'));
        }
        
        function setupNotificationForm() {
            const notificationForm = document.querySelector('.notification-form');
            const notificationInput = document.querySelector('.notification-input');
            const notificationBtn = document.querySelector('.notification-btn');
            
            if (notificationBtn && notificationInput) {
                notificationBtn.addEventListener('click', function() {
                    const email = notificationInput.value.trim();
                    
                    if (!email) {
                        if (window.showToast) {
                            window.showToast('Please enter your email address', 'error');
                        }
                        return;
                    }
                    
                    if (!validateEmail(email)) {
                        if (window.showToast) {
                            window.showToast('Please enter a valid email address', 'error');
                        }
                        return;
                    }
                    
                    if (window.showToast) {
                        window.showToast(`You'll be notified when new products arrive!`);
                    }
                    
                    notificationInput.value = '';
                    notificationInput.blur();
                });
                
                notificationInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        notificationBtn.click();
                    }
                });
            }
        }
        
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        function updateActiveNavLink() {
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => {
                if (link.href === window.location.href || 
                    link.textContent.includes('New Arrivals')) {
                    link.style.opacity = '0.7';
                    link.style.fontWeight = '500';
                }
            });
        }
    </script>
    <script src="assets/js/main.js"></script>
</body>
</html>